<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>sosiologe</title>
  <style>
    body { font-family: Arial; background:#f2f2f2; margin:0 }
    header { background:#111; color:#fff; padding:10px; display:flex; justify-content:space-between }
    .container { max-width:600px; margin:auto; padding:10px }
    .card { background:#fff; padding:10px; margin-bottom:10px; border-radius:8px }
    textarea, input { width:100%; padding:8px; margin:5px 0 }
    button { padding:6px 10px; cursor:pointer }
    .like { color:red; cursor:pointer }
    .comment { font-size:14px; margin-left:10px }
    img { max-width:40px; border-radius:50% }
  </style>
</head>
<body>

<header>
  <b>sosiologe</b>
  <button onclick="editProfile()">–ü—Ä–æ—Ñ–∏–ª—å</button>
</header>

<div class="container">

  <div class="card">
    <textarea id="postText" placeholder="–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?"></textarea>
    <button onclick="addPost()">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
  </div>

  <div id="posts"></div>

</div>

<script>
let user = JSON.parse(localStorage.getItem("user")) || {
  name: "–ì–æ—Å—Ç—å",
  avatar: ""
};

let posts = JSON.parse(localStorage.getItem("posts")) || [];

function save() {
  localStorage.setItem("posts", JSON.stringify(posts));
}

function render() {
  const div = document.getElementById("posts");
  div.innerHTML = "";

  posts.forEach((p, i) => {
    div.innerHTML += `
      <div class="card">
        <b>${user.name}</b><br>
        ${p.text}<br><br>
        <span class="like" onclick="likePost(${i})">
          ‚ù§Ô∏è ${p.likes}
        </span>
        <div>
          <input placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" onkeydown="comment(event, ${i})">
        </div>
        ${p.comments.map(c=>`<div class="comment">üí¨ ${c}</div>`).join("")}
      </div>
    `;
  });
}

function addPost() {
  const text = postText.value.trim();
  if (!text) return;
  posts.unshift({ text, likes:0, liked:false, comments:[] });
  postText.value = "";
  save(); render();
}

function likePost(i) {
  if (posts[i].liked) return;
  posts[i].likes++;
  posts[i].liked = true;
  save(); render();
}

function comment(e, i) {
  if (e.key === "Enter" && e.target.value.trim()) {
    posts[i].comments.push(e.target.value);
    e.target.value = "";
    save(); render();
  }
}

function editProfile() {
  const name = prompt("–ò–º—è:", user.name);
  if (name) {
    user.name = name;
    localStorage.setItem("user", JSON.stringify(user));
    render();
  }
}

render();
</script>

</body>
</html>
